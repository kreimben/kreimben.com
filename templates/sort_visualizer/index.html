{% extends 'site_base.html' %}

{% block title %}
    {{ title }} [kreimben.com]
{% endblock %}

{% block menu %}
    {% include 'menu.html' %}
{% endblock %}

{% block content %}
    <h1>Sort Visualizer</h1>

    {# slide bar with numbers #}
    <div class="slidecontainer">
        <input type="range" min="10" max="1000" value="100" class="slider" id="myRange">
        <p>Value: <span id="demo"></span></p>
        <button onclick="init_container()">Regenerate</button>
    </div>

    <div id="box">
        <div id="container"></div>
    </div>

    <script>
        window.onload = () => {
            bind_slider();
        };

        // functions
        const init_container = () => {
            stop_sorting();

            const container = document.getElementById('container');
            const numberOfElements = document.getElementById('myRange').value;

            // remove all children in container
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }

            // append new children
            for (let i = 0; i < numberOfElements; i++) {
                // generate random height
                const element = document.createElement('div');
                element.classList.add('element');
                element.style.position = 'absolute';
                element.style.left = `${i / numberOfElements * 100}%`;
                element.style.height = `${Math.random() * 100}%`;
                element.style.width = `${Math.floor(1 / numberOfElements * 100)}%`;
                element.style.backgroundColor = 'gray';
                element.style.borderColor = 'black';
                element.style.borderStyle = 'solid';
                container.appendChild(element);
            }
        };

        const bind_slider = () => {
            stop_sorting();

            const slider = document.getElementById('myRange');
            const output = document.getElementById('demo');
            output.innerHTML = slider.value;

            slider.oninput = () => {
                output.innerHTML = slider.value;
            };
        };

        const stop_sorting = () => {
            // TODO: Implement stop sorting
        };

        const start_sorting = () => {
            // TODO: Implement start sorting
        };
    </script>

    <script>
        // logics
        // first script
        init_container();
    </script>

    <style>
        #container {
            background-color: yellowgreen;
            position: relative;
            margin: 0px 30px 0px 0px;
            height: 78vh;
            width: 100%;
        }

        #box {
            padding-top: 50px;
            margin-top: 25px;
            position: relative;
            left: 50%;
            clear: both;
            -ms-transform: translateX(-50%);
            transform: translateX(-50%);
            width: 90%;
            background-color: aqua;

            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
{% endblock %}